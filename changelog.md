# Changelog


## 作業手順

(改変ベースとしての)習作目的なので多少いじってます。

1. 法典を開きプロンプトをコピペ
2. 添付画像を開き縦横サイズを確認
3. 設定を入力して1枚生成
4. 右下に出た文字列をコピペしてtxtに保存
5. txtからjsonとpngに変換

Seed値は手元の動作確認時にランダムで付与したもの。
シードガチャはしていないので良い絵とは限らない。

## 編集内容

### 元素法典2巻

- e6e8e1fcと画像サイズの個別記載は止めました
  - サイズは縦長か横長か正方形かで雑に判断
- 1作品で複数出力したいものは末尾に-2 -3と付番
- Eta　0.68指示の作品もぼちぼちあるけど無視


### 元素法典1.5巻

- プロンプトのスペースや全角カンマ等のUnicode文字を変換せずそのままにした。
- 他は1巻と同じ。


### 元素法典1巻

- 数値が範囲で示されてるものは中央値を採用した。

- {}がひとつでもあればローカル用スクリプトに変換。
- ()と{}の混在のものも変換したが意図通りかは不明。
- ()をエスケープしたほうが良さそうなパターンはそうした。

- かっこの数が合わない時は減らす側に修正。
- 先頭のowresはコピペミスとみなしてlowresに修正。
その他細かいスペルチェックはしていません。

- 末尾のカンマは取り除いてしまっている。
これは生成結果に影響あり。

- プロンプトの改行はスペースに変換。
- スペースのC2A0は20に変換。
- 全角カンマと全角かっこは半角に変換。
以上は生成結果に影響なし。


## 作品ごとの調整

### 共通

- Sampler
  - 指定が無いものは Euler a とみなした
  - k_euler_ancestral も Euler a とした
- Steps の指定が無いものは 28
- CFG Scale の指定が無いものは 7
- Model hash は強制的に 925997e9
  - e6e8e1fc(latest nsfw)
- Eta は 0.67
  - k_euler_ancestral に合わせる意図
- width, heightは最小512、最大2048に収まるよう調整
  - 横長のもの以外は最大1024に収まるよう調整
- Negative Prompt(UC)指定が無い時はデフォルト値を採用


### 元素法典2巻

- 0201 虎
- 0202 虎? 0201とほぼ同じ?
- 0203 龍? DDIM版もあったが省略
- 0204 全くうまくいかない。curatedではなくanime fullを使えと書いてある。
- 0205 Sampler指定なし
- 0207 やっと女の子
- 0208 (monochrome:3)の:3を除去。著作権には気を付けてるらしい。東方は許可されていると説明がある。
- 0211 再現せず。Sampler指定なし
- 0212 再現せず。ネガティブ指定なし
- 0213 重厚油絵版。人物任意指定にold manを入れた。Steps指定なし
- 0214 枠からはみ出る・・・
- 0215 Sampler指定なし
- 0217 4つあるし解説もある
- 0220-7 コインはsilverも選べる
- 0228 プロンプトに漢字が入っている
- 0230 向こうの人も淫夢語でしゃべるんかな?
- 0231 Sampler、Steps指定なし。これもプロンプトに漢字を入れる
- 0233 プロンプトがローカル用なのにネガティブがweb用
- 0234 同。どっちも人物でない
- 0237 Sampler指定なし
- 0241 HN: anime_2 説明が細かい。nsfwを外すと脱ぐらしいが再現せず。
- 0242 手が完全に解決するらしいが隠されてしまった
- 0243-2 末尾に植物名を付与して使う
- 0245 HN: anime_3, ENSD: 17415, Clip skip: 1
- 0246 同
- 0249 Sampler、Steps指定なし。末尾に「その他カスタム内容」を追加する
- 0250 Variation seed strengthは無視した
- 0252 Eta 0.02は意味あるんだろうか
- 0253 プロンプトがローカル用なのにネガティブがweb用
- 0254 これは逆。どうなってんだ




### 元素法典1.5巻

- 0102 Model hashがe6e8e1fc
- 0103 e6e8e1fc
- 0104 e6e8e1fc、ネガティブの一部指定が誤ってるがそのままにした
- 0105 e6e8e1fc
- 0106 Steps指定なし
- 0107 画像が533x332だったので768x512に変更
- 0108 画像が553x371だったので768x512に変更
- 0109 ネガティブ指定なし
- 0110 e6e8e1fc
- 0111 :1.1があるけどそのままにした
- 0112 画像が554x277だったので768x512に変更
- 0113 e6e8e1fc
- 0114 Samplerが通用だがeta 0.67が指定されている
- 0115 e6e8e1fc
- 0116 e6e8e1fc
- 0118 男、画像が481x350だったので768x512に変更
- 0119 画像が554x266だったので768x512に変更
- 0120 画像が410x205だったので768x512に変更
- 0121 CFG Scale、Steps指定なし、640x640に変更
- 0122 画像が554x369だったので768x512に変更
- 0123 e6e8e1fc、?定版を採用


### 元素法典1巻

- 0005 砂、Sampler、Steps指定なし
- 0006 骨、Sampler、Steps指定なし
- 0009 ロボ、縦横サイズが2K超えだったので半分にした
- 0012 男
- 0015 縦768
- 0016 :2.5という指定は効いてないので削除、設定なし
- 0017 指定は横512だったけど画像の横768を採用
- 0025 サンプルは無人だったけど女の子が出た
- 0032 ロボ、縦横サイズが4K超えだったので1/4にした
- 0034 骨だけど手元ではうまくいかない
- 0038 甲冑女
- 0041 無人
- 0042 無人、縦横サイズが2.8Kだったので1/4にした
- 0049 ロボ、縦横サイズが4K超えだったので1/4にした
- 0051 3072x2048指定だったが960x640に落とした
- 0057 :2.5は削除、4864x2304指定だったが1/4に落とした


## 雑感

### 元素法典2巻

女の子がいない！

プロンプトをグループ分けしたり、色分けして解説を入れるなど、
構造を意識して作られているのがわかるようになった。
改造するなら原典を読んだ方が良さそう。

残念ながら再現率は下がった(ガチャの必要性が増した)。
ミスタイプとかカッコの数違いとかも相変わらず多い。

### 元素法典1.5巻

1.5巻はModel hashがe6e8e1fcのものが半数。
これはsfw版ではなくnsfwの7GBのやつらしい。
なんでfinal-prunedを使わなかったのかはわからない。

縦横サイズ指定の作品が増えた半面、
添付画像のサイズが小さくなったので、
指定してない作品がどんな大きさを意図してたかわからなくなった。


### 元素法典1巻

ガチャ頼りのものも多い。特にプロンプトが短いとうまく出ない。

全体的に解像度が大きめで1024くらいが基準になっている。
日本ではキャラ中心だったので512x768が主流だったイメージ。
女の子を常に小さく出すことに成功してるのは学院法(0053)で、
ほとんどのものは結局顔面アップになってしまったりする。

ロボはさらに高解像度が多いけど、手元ではアニメ少女が出る。
ひょっとすると高解像度で出さないと意図通りに出ないのかも。

プロンプト記法は必ずしも正しくなく、統一感も無い。
複数の記法が混じるのは他人の作品に手を加えるからだそうな。
半角全角なんかもごちゃ混ぜだけど動作には支障がない。

とはいえ手元で文字化けすると結構悲しいことになるので、
最新のUnicodeに対応したエディタを使いましょう。

みんなが最初からログをそのままコピペするか、
生のpngをそのまま共有してくれれば楽なんだけどなあ。
